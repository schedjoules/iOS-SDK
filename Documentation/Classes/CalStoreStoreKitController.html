<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>CalStoreStoreKitController Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1333)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">CalendarStore </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">SchedJoules</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	
	<optgroup label="Properties">
		
		<option value="//api/name/iCloudSyncEnabled">iCloudSyncEnabled</option>
		
		<option value="//api/name/restoring">restoring</option>
		
	</optgroup>
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/sharedController">+ sharedController</option>
		
	</optgroup>
	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/canUsePurchases">- canUsePurchases</option>
		
		<option value="//api/name/restorePurchasesWithCompletionHandler:">- restorePurchasesWithCompletionHandler:</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">CalStoreStoreKitController Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>CalStoreStoreKitController.h</td>
</tr><tr>
	<th>Companion guide</th>
	<td><a href="../docs/Documentation/MultipleApps.html">MultipleApps</a></td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>Controller that ties the CalendarStore into Apple&rsquo;s StoreKit framework for In-App purchases.</p>

<p><strong>Check if In-App Purchases are Enabled</strong></p>

<p>Apps should also check if In-App purchases are enabled on the device by checking if
<a href="#//api/name/sharedController"><code>[CalStoreStoreKitController sharedController]</code></a>.<a href="#//api/name/canUsePurchases"><code>canUsePurchases</code></a> returns YES.</p>

<p><strong>Order Status Notification</strong></p>

<p>When The StoreKitController changes the transaction status for a <a href="../Classes/CalStorePageItemCalendar.html">CalStorePageItemCalendar</a> object being purchased, the
<code>kCalStoreOrderStatusChangedNotification</code> notification is sent. <code>userInfo[kCalStoreOrderStatusChangedIdentifierKey]</code>
contains the identifier of the item that changed status.</p>

<p><strong>Refresh Notification</strong></p>

<p>When the whole store gets refreshed, the <code>kCalStoreOrderStatusRefreshAllNotification</code> notification is sent.
When receiving this notification, refresh all your UI so that changes can be reflected. This notification will be sent, for example, when in-app purchases
are being synced in over iCloud.</p>

<p><strong>Restoring Purchases</strong></p>

<p>This controller allows the app to restore already made purchases using the <a href="#//api/name/restorePurchasesWithCompletionHandler:">restorePurchasesWithCompletionHandler:</a> method.
When the <a href="#//api/name/restoring">isRestoring</a> property changes, the <code>kCalStoreRestoringPurchasesStatusChangedNotification</code> is broadcasted.</p>

<p><strong>iCloud Integration</strong></p>

<p>The CalendarStore.framework can sync purchasing information over iCloud to related apps of the same vendor. If you have multiple apps (e.g.
an iPhone and iPad version) that are related, you can either set the <code>CalendarStore</code>iCloudSyncEnabled<code></code> key to YES in the Info.plist of your app,
or use the <a href="#//api/name/iCloudSyncEnabled">iCloudSyncEnabled</a> property to do so in code. For more information, see the <a href="../docs/Documentation/MultipleApps.html">MultipleApps</a> companion guide.</p><div class="warning"><p><strong>Warning:</strong> Be aware that it is mandatory for users to be able to restore purchases. The default <a href="../Classes/CalStoreCalendarStoreViewController.html">CalStoreCalendarStoreViewController</a>
will allow users to do this. If you provide your own CalendarStore UI, you must provide users an option to restore purchases.</p></div>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						<a title="Getting Instance" name="task_Getting Instance"></a>
						<h2 class="task-title">Getting Instance</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/sharedController" title="sharedController"></a>
	<h3 class="method-title"><code><a href="#//api/name/sharedController">+&nbsp;sharedController</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the singleton controller object</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (instancetype)sharedController</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>the singleton controller used by the framework</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">CalStoreStoreKitController.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Purchases Enabled" name="task_Purchases Enabled"></a>
						<h2 class="task-title">Purchases Enabled</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/canUsePurchases" title="canUsePurchases"></a>
	<h3 class="method-title"><code><a href="#//api/name/canUsePurchases">&ndash;&nbsp;canUsePurchases</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Checks if Purchases can be made by the user.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)canUsePurchases</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if the user has in-app purchases enabled on his device.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Users can disable In-App purchases in the Parental Control settings of their device. Always
             check this before showing the Calendar Store.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">CalStoreStoreKitController.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Restoring Purchases" name="task_Restoring Purchases"></a>
						<h2 class="task-title">Restoring Purchases</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/restorePurchasesWithCompletionHandler:" title="restorePurchasesWithCompletionHandler:"></a>
	<h3 class="method-title"><code><a href="#//api/name/restorePurchasesWithCompletionHandler:">&ndash;&nbsp;restorePurchasesWithCompletionHandler:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Starts <a href="#//api/name/restoring">restoring</a> purchases already made by the user.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)restorePurchasesWithCompletionHandler:(CalStoreStoreKitCompletionHandler)<em>completionHandler</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>completionHandler</code></th>
						<td><p>block invoked on the main queue when the restore operation finished.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="note"><p><strong>Note:</strong> When <a href="#//api/name/restoring">restoring</a> is YES, calling this method will raise an exception.</p></div>
			</div>
			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/restoring">@property restoring</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">CalStoreStoreKitController.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/restoring" title="restoring"></a>
	<h3 class="method-title"><code><a href="#//api/name/restoring">&nbsp;&nbsp;restoring</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>YES when purchases are being restored.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly, getter=isRestoring) BOOL restoring</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p><code>kCalStoreRestoringPurchasesStatusChangedNotification</code> notifications are broadcasted when
             the value of this option changes. Observe the notification to update your UI accordingly.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">CalStoreStoreKitController.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="iCloud Integration" name="task_iCloud Integration"></a>
						<h2 class="task-title">iCloud Integration</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/iCloudSyncEnabled" title="iCloudSyncEnabled"></a>
	<h3 class="method-title"><code><a href="#//api/name/iCloudSyncEnabled">&nbsp;&nbsp;iCloudSyncEnabled</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>When YES, iCloud sync of purchasing information is enabled. If NO, iCloud sync is disabled.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, getter=isiCloudSyncEnabled) BOOL iCloudSyncEnabled</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The CalendarStore.framework can sync purchasing information over iCloud to related apps of the same vendor. If you have multiple apps (e.g.
an iPhone and iPad version) that are related, you can either set the <code>CalendarStoreiCloudSyncEnabled</code> key to YES in the Info.plist of your app,
or use the iCloudSyncEnabled property to do so in code. For more information, see the <a href="../docs/Documentation/MultipleApps.html">MultipleApps</a> companion guide.</p><div class="note"><p><strong>Note:</strong> You will need to enable iCloud entitlements in your XCode project for this to work.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">CalStoreStoreKitController.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2015 SchedJoules. All rights reserved. Updated: 2015-08-31</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1333)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>